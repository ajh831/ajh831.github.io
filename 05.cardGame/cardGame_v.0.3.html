<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0.1em;
            padding: 0.1em;
        }
        img {
            width: 80px;
            height: 120px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div>
            <button id="hide">뒤집기</button>
            <button id="show">힌트보기</button>
            <button id="shuffle">섞기</button>
            <span id="scoreBoard">점수 : </span>
        </div>
        <div id="board">
            <!-- <img src="../../00.img/card_img/1.png" alt=""> -->
            <!-- <img src="../../00.img/card_img/back.png" alt=""> -->
        </div>
    </div>
    <script>
        let cardArr = [];
        let defaultpath = '../../00.img/card_img/';
        let fileFormat = '.png';
        let backPath = '../../00.img/card_img/back.png';
        let compareArr = [];
        let score = 0;

        window.onload = function() {
            let flipBtn = document.getElementById('hide');
            let suffleBtn = document.getElementById('shuffle');
            let showAllBtn = document.getElementById('show');
            let cardCheck = document.getElementsByClassName('card');

            // 1. 배열 초기화
            boardCard();

            // 2. 배열 화면에 보여주기
            suffleCard();

            // 3. 배열 뒤집기
            flipBtn.onclick = flipAll;
            showAllBtn.onclick = hintCard;

        }

        /** 배열 초기화하는 함수 */
        function boardCard() {
            for(let i=0; i<52; i++) {
                let cardObj = {};
                let cardTagTxt = `<img class='card' id='${i}' src='${defaultpath}${i}${fileFormat}'>`;
                // console.log(cardTagTxt);
                cardObj.id = i;
                cardObj.cardTag = cardTagTxt;
                cardObj.val = false;
                cardArr.splice(i,0,cardObj);
            }
            console.log(cardArr);
        }

        /** 카드 배열을 섞어주는 함수 */
        function suffleCard() {
            // compareArr = [];

            // // // alert('클릭');
            cardArr.sort(function(a,b){
                return Math.random() - 0.5;
            });

            showCard();
        }

        /** 카드 보여주기 함수 */
        function showCard() {
            board.innerHTML = null;
            for(let i=0;i<cardArr.length;i++) {
                // console.log(i);
                // console.log(cardArr[i].cardTag);
                board.innerHTML += cardArr[i].cardTag;
            }
        }

        /** 뒤집기 버튼 */
        function flipAll() {
            let cardBoard = document.getElementsByClassName('card');
            for(let i=0;i<cardBoard.length; i++) {
                cardBoard[i].setAttribute('src', backPath);
                cardArr[i].val = false;
            }
        }

        /** 카드를 보여주는 힌트 함수 */
        function hintCard() {
            let imgTag;
            for (let i = 0; i < cardArr.length; i++) {
                imgTag = document.getElementById(i);
                imgTag.outerHTML = cardArr[imgTag.id].cardTag;
            }
            
            setTimeout(function() {
                for(let i=0;i<cardArr.length;i++) {
                    imgTag = document.getElementById(i);
                    if(cardArr[imgTag.id].val == false) {
                        imgTag.setAttribute('src', backPath);
                    }
                }},2000);
        }

    </script>
</body>
</html>