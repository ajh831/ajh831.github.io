<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        li::marker {
            content: 'ğŸ“Œ';
        }

        /* .grab {} */

        #marg {
            width: 50%;
            height: 50%;
            background-color: rgb(255, 255, 216);

            border: 10px solid pink;
            margin: 10px;
            padding: 30px;
        }

        #title {
            color: rgb(252, 127, 148);
            /* color: cadetblue; */
            text-decoration-line: underline;
            text-decoration-style: double;
            text-decoration-color: rgb(247, 84, 111);
        }


        li {
            background-color: rgb(255, 234, 238);
            cursor: -webkit-grab;
            cursor: grab;
        }

        #todo {
            width: 70%;
        }

        span {
            background-color: white;
        }

        #finish {
            position: relative;
            right: -75%;
        }
    </style>
</head>

<body>

    <div id="marg">
        <h1 style="display:inline;">&#127800;</h1>
        <h1 id="title" style="display:inline;">Todo list</h1>
        <br><br>
        <input id="todo" size=20% type="text" placeholder="ì˜¤ëŠ˜ì˜ í• ì¼" onkeypress='clickBtn(event)'>
        <!--  onkeypress="alert(this.value)" -->
        <button id="click" onclick='clickBtn(this)'>ì…ë ¥</button>
        <table id="tableID">
        </table>
        <br>
        <span id="doID"></span><br><br>
        <input type="button" id="finish" onclick="finishBtn(this)" value="DONE"></input>
    </div>

    <script>
        // â˜… ë°°ì—´ì„ í™œìš©í•´ì„œ ì§„í–‰í•  ê²ƒ â˜…
        // 1. ë¹ˆ ë°°ì—´ì„ ìƒì„±í•´ë‘ê¸°
        // 2. inputì— ë‚´ìš©ì´ ë“¤ì–´ì˜¤ë©´ ë°°ì—´ì— ì¶”ê°€í•˜ê¸°
        // 2.1. ì…ë ¥ì„ ëˆ„ë¥¸ ê²½ìš°
        // 2.1.1. ë°°ì—´ì˜ ì œì¼ ë’¤ì— ìš”ì†Œ ì¶”ê°€
        // 2.1.2. í™”ë©´ì— ì¶œë ¥
        // 2.2. ì—”í„°ë¥¼ ëˆ„ë¥¸ ê²½ìš°
        // 2.2.1. ë°°ì—´ì˜ ì œì¼ ë’¤ì— ìš”ì†Œ ì¶”ê°€
        // 2.2.2. í™”ë©´ì— ì¶œë ¥
        // 3. íˆ¬ë‘ ë‚´ìš© í´ë¦­í•˜ë©´ í•´ë‹¹ ë‚´ìš© ì‚­ì œí•˜ê¸°
        // 3.1. ë°°ì—´ì—ì„œ ì‚­ì œí•˜ê¸°
        // 3.1.1. liì—ì„œ í´ë¦­í–ˆì„ ë•Œ valueê°’ì„ ê°€ì§€ê³ ì˜¤ê¸°
        // 3.1.2. valueì™€ ë™ì¼í•œ ë°°ì—´ì˜ ìš”ì†Œë¥¼ ì°¾ê¸°
        // 3.1.2.1. ë™ì¼í•œ ìš”ì†Œì˜ ì¸ë±ìŠ¤ ì¶”ì¶œí•˜ê¸°
        // 3.1.2.2. ì‚­ì œí•˜ê¸°

        // ì¶”ê°€
        // ì‹¤ì²œ í–ˆëŠ”ì§€ ì•ˆí–ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ì²´í¬ë°•ìŠ¤ë¥¼ ì¶”ê°€
        // liíƒœê·¸ì™€ ë‚˜ë€íˆ ì‘ì„±í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ tableíƒœê·¸ë¡œ êµ¬ë¶„
        // 4. í…Œì´ë¸” íƒœê·¸ë¡œ ëª©ë¡ì„ ê°ì‹¼ë‹¤.
        // 4.1. ì…ë ¥í• ë•Œë§ˆë‹¤ í…Œì´ë¸”ì˜ í–‰ì´ ì¦ê°€í•˜ë„ë¡ ì‘ì„±

        // 1. ë¹ˆ ë°°ì—´ì„ ìƒì„±í•´ë‘ê¸°
        let listArr = []; // ì „ì—­
        let num = 0;
        let doItCnt = 0; // ì‹¤ì²œí•œ ê°œìˆ˜ í™•ì¸

        // 2. inputì— ë‚´ìš©ì´ ë“¤ì–´ì˜¤ë©´ ë°°ì—´ì— ì¶”ê°€í•˜ê¸°
        function clickBtn(element) {
            // console.log(element.keyCode);
            if(element.keyCode == 13 || element.id == "click") {
                addList();
                showList(num++);
                document.getElementById("todo").value = null;
            }
        }

        /** ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜*/
        function addList() {
            listArr.push(document.getElementById("todo").value);
        }

        /** ë°°ì—´ì—ì„œ ì‚­ì œ ë° íƒœê·¸ ì‚­ì œí•˜ëŠ” í•¨ìˆ˜*/
        function removeList(element) {
            let val = element.innerText;
            let idx = listArr.indexOf(val);
            listArr.splice(idx, 1); // ë°°ì—´ì—ì„œ ìš”ì†Œ ì‚­ì œ

            element.parentNode.parentNode.innerHTML = null; // í•œ ì¤„ì„ ì‚­ì œí•´ì•¼ ë˜ê¸°ë•Œë¬¸ì— tr td liìˆœ ì´ë¯€ë¡œ ë‘ë²ˆ ì˜¬ë¼ê°€ì•¼ ë¨
        }

        let doItElement = document.getElementById("doID");


        /** í™”ë©´ì— ë„ìš°ëŠ” í•¨ìˆ˜*/
        function showList(num) {
            let tableTag = document.getElementById("tableID");
            // console.log(tableTag);
            tableTag.innerHTML += `<tr id="tr_${num}"><td><li onclick="removeList(this)">${listArr[listArr.length - 1]}</li></td>
                <td><input type="checkbox" unchecked onclick="doIt(this)"></td></tr>`;
            doItCnt = 0;
            doItElement.innerText = null;
        }

        /** ì‹¤í–‰ ì™„ë£Œ ê°œìˆ˜ í™•ì¸í•˜ëŠ” í•¨ìˆ˜*/
        function doIt(element) {
            let elCh = element.checked;
            console.log(elCh);


            if (elCh == true) {
                // console.log(doItElement);
                doItElement.innerText = `ì‹¤í–‰ ì™„ë£Œ : ${++doItCnt}`;
            } else {
                doItElement.innerText = null;
                doItElement.innerText = `ì‹¤í–‰ ì™„ë£Œ : ${--doItCnt}`;

                if (doItCnt == 0) {
                    doItElement.innerText = null;
                }
            }
        }

        /** todo ë‹¤ ì ì—ˆìœ¼ë©´ ì…ë ¥ ì™„ë£Œë¡œ ë”ì´ìƒ ì…ë ¥ í•  ìˆ˜ ì—†ê²Œ ë§Œë“œëŠ” ë²„íŠ¼*/
        function finishBtn(element) {
            // console.log(element.value);
            if(element.value == "DONE") {
                element.value = "OPEN";
                document.getElementById("click").disabled = true;
            } else if(element.value == "OPEN") {
                element.value = "DONE";
                document.getElementById("click").disabled = false;
            }
            
        }

    </script>
</body>

</html>